---
import Layout from "../../layouts/Layout.astro";
import Breadcrumb from "../../components/Breadcrumb.astro";
import ModernContactForm from "../../components/ModernContactForm.astro";
import { getFormattedPageData } from "../../utils/pageMeta";
import ReviewsLinkSection from "../../components/ReviewsLinkSection.astro";

// import NearbyAreas from "../../components/NearbyAreasList.astro";
import NearbyAreas from "../../components/NearbyAreasJoiner.astro"; // this location is unique a specific for the service offered !! CHECK

import GalleryGrid from "../../components/GalleryGrid.astro";
import galleryImg1 from "../../assets/images/moulding_plane.png";
import galleryImg2 from "../../assets/images/bench-plane-frog.jpg";
import galleryImg3 from "../../assets/images/bespoke-joinery/handmade-wooden-garage-door.jpg";
import galleryImg4 from "../../assets/images/bespoke-joinery/raised-panelling.jpg";

// Add your lastmod date here:
export const lastmod = "2025-01-27";

const {
  formattedServiceName,
  locationInText,
  cleanLocationName,
  businessSchema,
  serviceSchema,
  faqSchema,
  defaultDescription,
  enhancedKeywords,
  enhancedDescription,
} = getFormattedPageData(Astro);

const description = `Expert joiner services ${locationInText.trim()} by City & Guilds qualified craftsman. Bespoke staircases, sash windows, doors & fine joinery. 30+ years experience, traditional craftsmanship. Get your joinery done properly.`;
const finalDescription = enhancedDescription || description || defaultDescription;
---

<Layout
  title={`Expert Joiner in ${locationInText
    .trim()
    .replace(/-/g, " ")
    .replace(/\b\w/g, (c) => c.toUpperCase())} | Bespoke Carpentry & Repairs`}
  description={finalDescription}
  keywords={enhancedKeywords}
  location={Astro.params.location}
  structuredData={businessSchema}
  lastmod={lastmod}
>
  <Fragment slot="head">
    <script
      type="application/ld+json"
      set:html={JSON.stringify(businessSchema)}
    />
    <script
      type="application/ld+json"
      set:html={JSON.stringify(serviceSchema)}
    />
    <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  </Fragment>

  <main class="mx-auto md:mt-16 relative z-10">
    <section class="w-full container mx-auto px-4 sm:px-6 py-8">
      <Breadcrumb
        crumbs={[
          { label: "Joinery Services", href: "/joinery-services" },
          { label: formattedServiceName, current: true },
        ]}
      />

      <h1 class="text-3xl font-bold tracking-tight pb-4">
        {formattedServiceName}
        {
          locationInText
            .trim()
            .replace(/-/g, " ")
            .replace(/\b\w/g, (c) => c.toUpperCase())
        }
      </h1>

      <div class="grid grid-cols-1 md:grid-cols-2 items-start gap-8">
        <div class="space-y-4 text-gray-600 prose">
          <p>
            Hi, I’m Robert — a time-served joiner with over 30 years of hands-on
            experience. I’ve worked across domestic, commercial, and heritage
            projects, and I still get great satisfaction from delivering proper,
            well-finished joinery the right way. I work on sash windows, custom
            staircases, bespoke doors, heritage repairs, and traditional roofing
            — with proper care and attention to detail.
          </p>
          <p>
            Whether you need something unique crafting from scratch or a
            reliable installation service, I offer truly bespoke joinery {
              locationInText
            }. Every job is different, and that’s why I combine traditional
            carpentry techniques with modern tools and materials to make sure
            the results are spot on.
          </p>
          <p>
            I cover everything from first and second fix joinery to fine
            finishing work. That includes heritage restorations, sash windows,
            custom staircases, doors, skirtings, architraves, roofs, and
            shopfitting — all delivered with care and attention to detail.
          </p>
          {
            cleanLocationName && (
              <p>
                {cleanLocationName} has a real mix of property types — from
                traditional stone cottages to newer builds. Whether it’s a sash
                window repair in the centre or a full staircase fit in a nearby
                village, I tailor the work to suit the needs of local homes and
                buildings.
              </p>
            )
          }
          <p>
            I’m proud to be City & Guilds qualified, and I don’t cut corners. I
            use the right materials, prep carefully, and make sure each job is
            finished to a standard I’d be happy with in my own home.
          </p>
          <p>
            I also take pride in how I leave the job. You’ll find everything
            protected while I work, tidied up before I leave, and I’ll walk you
            through the results to make sure you’re 100% happy before signing
            off.
          </p>
          <p>
            You can also <a
              href="/about"
              class="font-semibold text-blue-700 hover:underline"
              >learn more about me here</a
            > or take a look at <a
              href="/qualifications"
              class="font-semibold text-blue-700 hover:underline"
              >my qualifications and experience</a
            >.
          </p>
          <p>
            If you’re{locationInText ? locationInText : " the local area"} and you’re
            looking for a joiner who’s easy to deal with, does things properly, and
            really cares about the result — I’d be glad to have a chat. Just
            <a
              href="/contact"
              class="font-semibold text-blue-700 hover:underline"
              >get in touch</a
            >.
          </p>
          <ReviewsLinkSection />
        </div>

        <aside class="w-full flex flex-col items-stretch gap-6">
          <div class="w-full order-last md:order-none">
            <GalleryGrid
              items={[
                {
                  src: galleryImg1,
                  alt: `Traditional timber joinery tools and craftsmanship${locationInText}`,
                  label: "Wooden Moulding Plane",
                },
                {
                  src: galleryImg2,
                  alt: `Vintage moulding plane showing traditional joinery skills${locationInText}`,
                  label: "Bench Plane Tool",
                },
                {
                  src: galleryImg3,
                  alt: `Bespoke wooden garage door by local joiner${locationInText}`,
                  label: "Handmade Garage Door",
                },
                {
                  src: galleryImg4,
                  alt: `Detailed raised panelling by a qualified joiner${locationInText}`,
                  label: "Raised Panel Joinery",
                },
              ]}
            />
          </div>
          <div class="bg-white p-4 sm:p-6 rounded-xl shadow-md w-full">
            <h2
              class="text-xl sm:text-2xl font-bold mb-4 text-gray-800 text-center"
            >
              Get in Touch About Your Joinery Project
            </h2>
            <p class="text-gray-600 mb-6 text-center">
              Whether it’s a bespoke staircase, sash window repair, or a full
              joinery refit — I’d be happy to chat and see how I can hel.
            </p>
            <ModernContactForm
              title="Get Your Free Quote"
              subtitle="Ready to start your project? Get in touch for a free, no-obligation quote."
            />
          </div>
        </aside>
      </div>
      <NearbyAreas />
    </section>
  </main>
</Layout>
