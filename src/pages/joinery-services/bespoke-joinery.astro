---
import Layout from "../../layouts/Layout.astro";
import ModernContactForm from "../../components/ModernContactForm.astro";
import { getFormattedPageData } from "../../utils/pageMeta";
import ReviewsLinkSection from "../../components/ReviewsLinkSection.astro";
import ServiceHero from "../../components/ServiceHero.astro";
import MeetRobertCard from "../../components/MeetRobertCard.astro";
import ServiceFeatureCard from "../../components/ServiceFeatureCard.astro";
import ServiceListCard from "../../components/ServiceListCard.astro";

// import NearbyAreas from "../../components/NearbyAreasList.astro";
import NearbyAreas from "../../components/NearbyAreasBespokeJoinery.astro"; // this location is unique a specific for the service offered !! CHECK

import GalleryGrid from "../../components/GalleryGrid.astro";
import galleryImg1 from "../../assets/images/bespoke-joinery/handmade-ash-bathroom-vanity-cabinet.jpeg";
import galleryImg2 from "../../assets/images/bespoke-joinery/handmade-english-oak-picture-frame.jpeg";
import galleryImg3 from "../../assets/images/bespoke-joinery/handmade-wooden-garage-door.jpg";
import galleryImg4 from "../../assets/images/bespoke-joinery/raised-panelling.jpg";
import galleryImg5 from "../../assets/images/bespoke-joinery/handmade-oak-mirror-frame.jpeg";
import galleryImg6 from "../../assets/images/bespoke-joinery/bench-plane-frog.png";

const {
  formattedServiceName,
  locationInText,
  cleanLocationName,
  businessSchema,
  serviceSchema,
  faqSchema,
  defaultDescription,
  enhancedKeywords,
  // enhancedDescription, // Not used
  pageTitle,
} = getFormattedPageData(Astro);

const description = `Expert bespoke joinery ${locationInText} by City & Guilds qualified joiner. Doors, windows & staircases. 30+ years experience, quality craftsmanship.`;
const finalDescription = description || defaultDescription;
---

<Layout
  title={`${pageTitle} | Bespoke Joinery for Doors, Windows & Staircases`}
  description={finalDescription}
  keywords={enhancedKeywords}
  structuredData={businessSchema}
>
  <Fragment slot="head">
    <script
      is:inline
      type="application/ld+json"
      set:html={JSON.stringify(businessSchema)}
    />
    <script
      is:inline
      type="application/ld+json"
      set:html={JSON.stringify(serviceSchema)}
    />
    <script
      is:inline
      type="application/ld+json"
      set:html={JSON.stringify(faqSchema)}
    />
  </Fragment>

  <main class="mx-auto relative z-10">
    <ServiceHero
      badge="Bespoke Joinery"
      title={pageTitle}
      description="Expert bespoke joinery crafted with precision and care. From custom staircases to handcrafted furniture, every piece is made-to-measure for your unique space."
      breadcrumbCrumbs={[
        { label: "Joinery Services", href: "/joinery-services" },
        ...(cleanLocationName
          ? [
              {
                label: formattedServiceName,
                href: `/joinery-services/${formattedServiceName.toLowerCase().replace(/\s+/g, "-")}`,
              },
              { label: cleanLocationName, current: true },
            ]
          : [{ label: formattedServiceName, current: true }]),
      ]}
    />

    <!-- Main Content Section -->
    <section class="section bg-white">
      <div class="container-wide">
        <div class="grid lg:grid-cols-2 items-start gap-12 lg:gap-20">
          <!-- Content Column -->
          <div class="order-2 lg:order-1 animate-on-scroll">
            <div
              class="space-y-6 text-neutral-700 leading-relaxed text-balance"
            >
              <div class="card card-hover p-6">
                <div class="flex items-start gap-4 mb-4">
                  <div
                    class="flex-shrink-0 w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center"
                  >
                    <svg
                      class="w-6 h-6 text-brand-600"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"
                      ></path>
                    </svg>
                  </div>
                  <div>
                    <h2 class="text-xl font-bold text-neutral-900 mb-2">
                      Meet Robert
                    </h2>
                    <p class="text-neutral-600">
                      Hi, I'm Robert — a City & Guilds Advanced Craft qualified
                      joiner with over three decades of hands-on experience. I
                      offer personal, made-to-measure joinery solutions {
                        locationInText
                      }, working with clients who value craftsmanship,
                      precision, and honest advice.
                    </p>
                  </div>
                </div>
              </div>

              <div class="space-y-4">
                <p>
                  Whether it's a bespoke staircase, traditional timber windows,
                  or fine interior detailing, I work closely with you to deliver
                  joinery that feels right for your space. Every commission is
                  crafted with care — using high-quality materials, proven
                  techniques, and attention to detail.
                </p>
                <p>
                  My work includes traditional and modern joinery, from hand-cut
                  timber features to router-assisted finishes and full project
                  installations {locationInText}. Whether it's a one-off piece
                  or a full property refit, you'll always get quality that
                  lasts.
                </p>
                {
                  cleanLocationName && (
                    <p>
                      {cleanLocationName} includes everything from period homes
                      to newer properties, and I tailor each bespoke joinery job
                      to suit. From traditional styles to more contemporary
                      detailing, the goal is always to make the joinery feel
                      like it belongs in the space.
                    </p>
                  )
                }
                <p>
                  From garage doors and staircases to custom flooring and
                  interior fittings — if you're after something that's done
                  properly, I can help {locationInText}.
                </p>
                <p>
                  I also carry out site joinery, structural timber framing, and
                  period feature repairs for listed buildings and heritage
                  properties — always with care and consideration for your home.
                </p>
              </div>

              <!-- Why Work With Me Section -->
              <div
                class="card card-hover border-l-4 border-accent-500 bg-gradient-to-r from-accent-50 to-white"
              >
                <div class="card-body">
                  <h2
                    class="text-2xl font-bold text-neutral-900 mb-4 flex items-center gap-3"
                  >
                    <svg
                      class="w-6 h-6 text-accent-600"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                        clip-rule="evenodd"></path>
                    </svg>
                    Why Work With Me?
                  </h2>
                  <div class="space-y-4">
                    <p>
                      I show up when I say I will, do what I say I'll do, and
                      take pride in leaving things just right. Much of my work
                      comes from word of mouth — and many of my clients ask me
                      back for further projects.
                    </p>
                    <p>
                      You'll be dealing directly with me — not a sales team. If
                      you'd like to check my experience, feel free to <a
                        href="/qualifications"
                        class="font-semibold text-brand-600 hover:text-brand-700 transition-colors"
                        >view my credentials</a
                      >.
                    </p>
                    <p>
                      If you're planning a bespoke joinery project {
                        locationInText
                      }, I'd be happy to have a no-pressure chat and see how I
                      can help.
                    </p>
                  </div>
                </div>
              </div>

              <ReviewsLinkSection />
            </div>
          </div>

          <!-- Sidebar Column -->
          <div class="order-1 lg:order-2 animate-on-scroll">
            <div class="space-y-8">
              <!-- Gallery Section -->
              <div class="card card-hover overflow-hidden">
                <div class="card-header">
                  <h2 class="text-xl font-bold text-neutral-900">
                    Our Bespoke Joinery Work
                  </h2>
                  <p class="text-neutral-600 mt-2">
                    Examples of our handcrafted joinery projects
                  </p>
                </div>
                <div class="card-body p-0">
                  <GalleryGrid
                    items={[
                      {
                        src: galleryImg1,
                        alt: `Bespoke ash bathroom vanity cabinet handcrafted with traditional joinery techniques${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                        label: "Handmade Ash Vanity Cabinet",
                      },
                      {
                        src: galleryImg2,
                        alt: `English oak picture frame detail showing fine joinery and traditional craftsmanship${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                        label: "English Oak Picture Frame",
                      },
                      {
                        src: galleryImg3,
                        alt: `Custom-built wooden garage door crafted with solid timber and traditional joinery${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                        label: "Handmade Timber Garage Door",
                      },
                      {
                        src: galleryImg4,
                        alt: `Raised panelled timber wall feature showcasing bespoke joinery and period styling${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                        label: "Raised Timber Panelling",
                      },
                      {
                        src: galleryImg5,
                        alt: `Handmade oak mirror frame crafted with fine detailing and traditional joinery methods${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                        label: "Handmade Oak Mirror Frame",
                        loading: "lazy",
                      },
                      {
                        src: galleryImg6,
                        alt: `Close-up of a bench plane frog showing precision components used in bespoke woodworking${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                        label: "Bench Plane Detail",
                        loading: "lazy",
                      },
                    ]}
                  />
                </div>
              </div>

              <!-- Contact Form Section -->
              <div class="card card-hover gradient-brand text-white">
                <div class="card-body">
                  <div class="text-center mb-6">
                    <div
                      class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4"
                    >
                      <svg
                        class="w-8 h-8 text-white"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                      >
                        <path
                          d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
                        ></path>
                        <path
                          d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"
                        ></path>
                      </svg>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">
                      Get in Touch About Your Joinery Project
                    </h2>
                    <p class="text-brand-100">
                      Whether it's a bespoke staircase, sash window repair, or a
                      full joinery refit — I'd be happy to chat and see how I
                      can help.
                    </p>
                  </div>
                  <ModernContactForm
                    title="Get Your Professional Quote"
                    subtitle="Ready to start your bespoke joinery project? Get in touch for a professional, no-obligation quote."
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Nearby Areas Section -->
    <section class="section bg-neutral-50">
      <div class="container-wide">
        <div class="animate-on-scroll">
          <NearbyAreas location={Astro.params.location} />
        </div>
      </div>
    </section>
  </main>
</Layout>
