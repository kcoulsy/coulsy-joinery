---
import Layout from "../../layouts/Layout.astro";
import Breadcrumb from "../../components/Breadcrumb.astro";
import ModernContactForm from "../../components/ModernContactForm.astro";
import { getFormattedPageData } from "../../utils/pageMeta";
import ReviewsLinkSection from "../../components/ReviewsLinkSection.astro";

// import NearbyAreas from "../../components/NearbyAreasList.astro";
import NearbyAreas from "../../components/NearbyAreasBespokeJoinery.astro"; // this location is unique a specific for the service offered !! CHECK

import GalleryGrid from "../../components/GalleryGrid.astro";
import galleryImg1 from "../../assets/images/bespoke-joinery/handmade-ash-bathroom-vanity-cabinet.jpeg";
import galleryImg2 from "../../assets/images/bespoke-joinery/handmade-english-oak-picture-frame.jpeg";
import galleryImg3 from "../../assets/images/bespoke-joinery/handmade-wooden-garage-door.jpg";
import galleryImg4 from "../../assets/images/bespoke-joinery/raised-panelling.jpg";
import galleryImg5 from "../../assets/images/bespoke-joinery/handmade-oak-mirror-frame.jpeg";
import galleryImg6 from "../../assets/images/bespoke-joinery/bench-plane-frog.png";

const {
  formattedServiceName,
  locationInText,
  cleanLocationName,
  businessSchema,
  serviceSchema,
  faqSchema,
  defaultDescription,
} = getFormattedPageData(Astro);

const description = `Expert bespoke joinery services ${locationInText.trim()} by City & Guilds qualified joiner. Custom staircases, doors, windows & handcrafted woodwork. 30+ years experience, made-to-measure solutions. Get your unique joinery crafted with care.`;
const finalDescription = description || defaultDescription;
---

<Layout
  title={`${formattedServiceName} ${locationInText.trim()} | Bespoke Joinery for Doors, Windows & Staircases`}
  description={finalDescription}
>
  <Fragment slot="head">
    <script
      type="application/ld+json"
      set:html={JSON.stringify(businessSchema)}
    />
    <script
      type="application/ld+json"
      set:html={JSON.stringify(serviceSchema)}
    />
    <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  </Fragment>

  <main class="mx-auto md:mt-16 relative z-10">
    <section class="w-full container mx-auto px-4 sm:px-6 py-8">
      <Breadcrumb
        crumbs={[
          { label: "Joinery Services", href: "/joinery-services" },
          { label: formattedServiceName, current: true },
        ]}
      />

      <h1 class="text-3xl font-bold tracking-tight pb-4">
        {formattedServiceName}
        {
          locationInText
            .trim()
            .replace(/-/g, " ")
            .replace(/\b\w/g, (c) => c.toUpperCase())
        }
      </h1>

      <div class="grid grid-cols-1 md:grid-cols-2 items-start gap-8">
        <div class="space-y-4 text-gray-600 prose">
          <p>
            Hi, I’m Robert — a City & Guilds Advanced Craft qualified joiner
            with over three decades of hands-on experience. I offer personal,
            made-to-measure joinery solutions {locationInText}, working with
            clients who value craftsmanship, precision, and honest advice.
          </p>
          <p>
            Whether it’s a bespoke staircase, traditional timber windows, or
            fine interior detailing, I work closely with you to deliver joinery
            that feels right for your space. Every commission is crafted with
            care — using high-quality materials, proven techniques, and
            attention to detail.
          </p>
          <p>
            My work includes traditional and modern joinery, from hand-cut
            timber features to router-assisted finishes and full project
            installations {locationInText}. Whether it’s a one-off piece or a
            full property refit, you’ll always get quality that lasts.
          </p>
          {
            cleanLocationName && (
              <p>
                {cleanLocationName} includes everything from period homes to
                newer properties, and I tailor each bespoke joinery job to suit.
                From traditional styles to more contemporary detailing, the goal
                is always to make the joinery feel like it belongs in the space.
              </p>
            )
          }
          <p>
            From garage doors and staircases to custom flooring and interior
            fittings — if you’re after something that’s done properly, I can
            help {locationInText}.
          </p>
          <p>
            I also carry out site joinery, structural timber framing, and period
            feature repairs for listed buildings and heritage properties —
            always with care and consideration for your home.
          </p>

          <h2 class="font-semibold text-lg">Why Work With Me?</h2>
          <p>
            I show up when I say I will, do what I say I’ll do, and take pride
            in leaving things just right. Much of my work comes from word of
            mouth — and many of my clients ask me back for further projects.
          </p>
          <p>
            You’ll be dealing directly with me — not a sales team. If you’d like
            to check my experience, feel free to <a
              href="/qualifications"
              class="font-semibold text-blue-700 hover:underline"
              >view my credentials</a
            >.
          </p>
          <p>
            If you're planning a bespoke joinery project {locationInText}, I’d
            be happy to have a no-pressure chat and see how I can help.
          </p>
          <ReviewsLinkSection />
        </div>
        <aside class="w-full flex flex-col items-stretch gap-6">
          <div class="w-full order-last md:order-none">
            <GalleryGrid
              items={[
                {
                  src: galleryImg1,
                  alt: `Bespoke ash bathroom vanity cabinet handcrafted with traditional joinery techniques${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                  label: "Handmade Ash Vanity Cabinet",
                },
                {
                  src: galleryImg2,
                  alt: `English oak picture frame detail showing fine joinery and traditional craftsmanship${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                  label: "English Oak Picture Frame",
                },
                {
                  src: galleryImg3,
                  alt: `Custom-built wooden garage door crafted with solid timber and traditional joinery${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                  label: "Handmade Timber Garage Door",
                },
                {
                  src: galleryImg4,
                  alt: `Raised panelled timber wall feature showcasing bespoke joinery and period styling${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                  label: "Raised Timber Panelling",
                },
                {
                  src: galleryImg5,
                  alt: `Handmade oak mirror frame crafted with fine detailing and traditional joinery methods${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                  label: "Handmade Oak Mirror Frame",
                  loading: "lazy",
                },
                {
                  src: galleryImg6,
                  alt: `Close-up of a bench plane frog showing precision components used in bespoke woodworking${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                  label: "Bench Plane Detail",
                  loading: "lazy",
                },
              ]}
            />
          </div>
          <div class="bg-white p-4 sm:p-6 rounded-xl shadow-md w-full">
            <h2
              class="text-xl sm:text-2xl font-bold mb-4 text-gray-800 text-center"
            >
              Get in Touch About Your Joinery Project
            </h2>
            <p class="text-gray-600 mb-6 text-center">
              Whether it’s a bespoke staircase, sash window repair, or a full
              joinery refit — I’d be happy to chat and see how I can help..
            </p>
            <ModernContactForm
              title="Get Your Free Quote"
              subtitle="Ready to start your bespoke joinery project? Get in touch for a free, no-obligation quote."
            />
          </div>
        </aside>
      </div>
      <NearbyAreas />
    </section>
  </main>
</Layout>
