---
import Layout from "../../layouts/Layout.astro";
import Breadcrumb from "../../components/Breadcrumb.astro";
import ModernContactForm from "../../components/ModernContactForm.astro";
import { getFormattedPageData } from "../../utils/pageMeta";
import ReviewsLinkSection from "../../components/ReviewsLinkSection.astro";

// import NearbyAreas from "../../components/NearbyAreasList.astro";
import NearbyAreas from "../../components/NearbyAreasCarpenter.astro"; // this location is unique a specific for the service offered !! CHECK

import GalleryGrid from "../../components/GalleryGrid.astro";
import galleryImg1 from "../../assets/images/moulding_plane.png";
import galleryImg2 from "../../assets/images/bench-plane-frog.jpg";
import galleryImg3 from "../../assets/images/bespoke-joinery/handmade-wooden-garage-door.jpg";
import galleryImg4 from "../../assets/images/bespoke-joinery/raised-panelling.jpg";

const {
  formattedServiceName,
  locationInText,
  cleanLocationName,
  businessSchema,
  serviceSchema,
  faqSchema,
  defaultDescription,
} = getFormattedPageData(Astro);

const description = `Expert structural carpentry services ${locationInText.trim()} by City & Guilds qualified joiner. Roofs, floors, timber framing & studwork. 30+ years experience, new builds & renovations. Get your structural work done right.`;
const finalDescription = description || defaultDescription;
---

<Layout
  title={`${formattedServiceName} ${locationInText.trim()} | Structural Carpentry for Roofs, Floors & Timber Frames`}
  description={finalDescription}
>
  <Fragment slot="head">
    <script
      type="application/ld+json"
      set:html={JSON.stringify(businessSchema)}
    />
    <script
      type="application/ld+json"
      set:html={JSON.stringify(serviceSchema)}
    />
    <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  </Fragment>
  <main class="mx-auto md:mt-16 relative z-10">
    <section class="w-full container mx-auto px-4 sm:px-6 py-8">
      <Breadcrumb
        crumbs={[
          { label: "Joinery Services", href: "/joinery-services" },
          { label: formattedServiceName, current: true },
        ]}
      />

      <h1 class="text-3xl font-bold tracking-tight pb-4">
        {formattedServiceName}
        {
          locationInText
            .trim()
            .replace(/-/g, " ")
            .replace(/\b\w/g, (c) => c.toUpperCase())
        }
      </h1>

      <div class="grid grid-cols-1 md:grid-cols-2 items-start gap-8">
        <div class="space-y-4 text-gray-600 prose">
          <p>
            Hi, I’m Robert — a time-served carpenter and joiner with over 30
            years of experience working on everything from new builds and
            extensions to restorations and roofing. I take pride in doing things
            properly — no shortcuts, no guesswork — just solid, reliable work.
            Whether you're after site carpentry, roof carcassing, or floor joist
            installation, I offer practical solutions tailored to each build.
          </p>

          <p>
            I'm a <a
              href="/qualifications"
              class="text-blue-700 font-semibold hover:underline"
            >
              fully qualified City & Guilds joiner</a
            > with decades of practical site experience.
          </p>

          <p>
            Carpentry is the backbone of any build. Whether it’s first fix stud
            walls, joists, roof structures, or floor systems, I make sure
            everything is measured, marked, and fixed with care. My work sets
            the standard for whatever follows — and I treat that responsibility
            seriously.
          </p>

          <p>
            I bring a mix of traditional skill and modern tools to every job.
            From cutting in rafters and installing trusses to prepping timber
            frames for cladding, it’s all about getting the structure right and
            leaving it neat, plumb, and ready for the next trade. I also work
            closely with builders and project managers to ensure timber frames
            are correctly aligned and set out from the start.
          </p>
          {
            cleanLocationName && (
              <p>
                {cleanLocationName} features a wide range of property types —
                from traditional stone cottages to modern developments. Whether
                it’s structural roof timber, floor carcassing, or wall framing,
                I tailor each job to suit the character and needs of local
                buildings.
              </p>
            )
          }

          <p>
            You can also <a
              href="/about"
              class="font-semibold text-blue-700 hover:underline"
              >learn more about me here</a
            > or see <a
              href="/qualifications"
              class="font-semibold text-blue-700 hover:underline"
              >what qualifications and experience I bring to the job</a
            >.
          </p>

          <p>
            I’m based in North Yorkshire and work in and around {
              locationInText.trim()
                ? locationInText.trim().replace(/^in\s*/, "")
                : "the surrounding area"
            }. If you’re looking for a dependable carpenter who turns up, gets
            stuck in, and delivers work that lasts — I’d be glad to help.
          </p>

          <p>
            Feel free to <a
              href="/contact"
              class="font-semibold text-blue-700 hover:underline"
              >get in touch</a
            > for a chat about your project. Whether it’s domestic or commercial,
            I’m happy to offer advice and a no-obligation quote.
          </p>
          <ReviewsLinkSection />
        </div>

        <aside class="w-full flex flex-col items-stretch gap-6">
          <div class="w-full order-last md:order-none">
            <GalleryGrid
              items={[
                {
                  src: galleryImg1,
                  alt: `Traditional moulding plane used in fine carpentry work${locationInText}`,
                  label: "Traditional Moulding Plane Joinery Tool",
                },
                {
                  src: galleryImg2,
                  alt: `Bench plane used in structural woodworking and carpentry${locationInText}`,
                  label: "Precision Bench Plane Joinery",
                },
                {
                  src: galleryImg3,
                  alt: `Custom wooden garage door built by structural carpenter${locationInText}`,
                  label: "Custom Wooden Garage Door",
                },
                {
                  src: galleryImg4,
                  alt: `Raised wood panel feature from heritage carpentry project${locationInText}`,
                  label: "Heritage Raised Panel Joinery",
                },
              ]}
            />
          </div>
          <div class="w-full">
            <div class="bg-white p-4 sm:p-6 rounded-xl shadow-md">
              <h2
                class="text-xl sm:text-2xl font-bold mb-4 text-gray-800 text-center"
              >
                Get in Touch About Your Carpentry Project
              </h2>
              <p class="text-gray-600 mb-6 text-center">
                If you're planning structural carpentry work — from floors and
                roofing to framing and first fix — feel free to reach out. I’d
                be happy to discuss how I can help.
              </p>
              <ModernContactForm
                title="Get Your Free Quote"
                subtitle="Ready to start your project? Get in touch for a free, no-obligation quote."
              />
            </div>
          </div>
        </aside>
      </div>
      <NearbyAreas />
    </section>
  </main>
</Layout>
