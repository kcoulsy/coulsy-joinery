---
import Layout from "../../layouts/Layout.astro";
import ModernContactForm from "../../components/ModernContactForm.astro";
import { getFormattedPageData } from "../../utils/pageMeta";
import ReviewsLinkSection from "../../components/ReviewsLinkSection.astro";
import ServiceHero from "../../components/ServiceHero.astro";
import MeetRobertCard from "../../components/MeetRobertCard.astro";
import ServiceFeatureCard from "../../components/ServiceFeatureCard.astro";
import ServiceListCard from "../../components/ServiceListCard.astro";

// import NearbyAreas from "../../components/NearbyAreasList.astro";
import NearbyAreas from "../../components/NearbyAreasGeneralJoinery.astro"; // this location is unique a specific for the service offered !! CHECK

import GalleryGrid from "../../components/GalleryGrid.astro";
import galleryImg1 from "../../assets/images/general-joinery/handmade-english-oak-picture-frame.jpeg";
import galleryImg2 from "../../assets/images/general-joinery/handmade-ash-bathroom-vanity-cabinet.jpeg";
import galleryImg3 from "../../assets/images/general-joinery/composite-garden-decking.jpg";
import galleryImg4 from "../../assets/images/general-joinery/room-partition.jpeg";
import galleryImg5 from "../../assets/images/general-joinery/fencing-and-gates.jpg";
import galleryImg6 from "../../assets/images/general-joinery/handmade-oak-mirror-frame.jpeg";

const {
  formattedServiceName,
  locationInText,
  cleanLocationName,
  businessSchema,
  serviceSchema,
  faqSchema,
  defaultDescription,
  enhancedKeywords,
  enhancedDescription,
  pageTitle,
} = getFormattedPageData(Astro);

const description = `Expert general joinery ${locationInText} by City & Guilds qualified joiner. Doors, floors, stairs & repairs. 30+ years experience, quality craftsmanship.`;
const finalDescription =
  enhancedDescription || description || defaultDescription;
---

<Layout
  title={`${pageTitle} | Trusted Local Joiner for Doors, Floors, Stairs & Repairs`}
  description={finalDescription}
  keywords={enhancedKeywords}
  structuredData={businessSchema}
>
  <Fragment slot="head">
    <script is:inline
      type="application/ld+json"
      set:html={JSON.stringify(businessSchema)}
    />
    <script is:inline
      type="application/ld+json"
      set:html={JSON.stringify(serviceSchema)}
    />
    <script is:inline type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  </Fragment>

  <main class="mx-auto relative z-10">
    <ServiceHero
      badge="General Joinery"
      title={pageTitle}
      description="Expert general joinery services with personal attention to detail. Doors, floors, stairs, repairs and finishing work by a City & Guilds qualified joiner."
      breadcrumbCrumbs={[
        { label: "Joinery Services", href: "/joinery-services" },
        ...(cleanLocationName
          ? [
              {
                label: formattedServiceName,
                href: `/joinery-services/${formattedServiceName.toLowerCase().replace(/\s+/g, "-")}`,
              },
              { label: cleanLocationName, current: true },
            ]
          : [{ label: formattedServiceName, current: true }]),
      ]}
    />

    <!-- Main Content Section -->
    <section class="section bg-white">
      <div class="container-wide">
        <div class="grid lg:grid-cols-2 items-start gap-12 lg:gap-20">
          <!-- Content Column -->
          <div class="order-2 lg:order-1 animate-on-scroll">
            <div
              class="space-y-6 text-neutral-700 leading-relaxed text-balance"
            >
              <MeetRobertCard
                introText={`I provide friendly, high-quality general joinery services${locationInText}, personally delivered with the care and detail you'd expect from someone who genuinely loves the craft. I'm Robert — a fully time-served joiner with over 30 years of hands-on experience in woodwork and building.`}
              />

              <div class="space-y-4">
                <p>
                  Whether you need a door hung, new skirting boards, or a
                  complete internal refurbishment, you'll always deal directly
                  with experienced craftsmen. We bring traditional skills and
                  modern techniques together, ensuring your project is completed
                  properly, first time.
                </p>
                <p>
                  From small repairs to larger improvements, we offer a
                  personal, straightforward service for homeowners, landlords,
                  and businesses{locationInText}.
                </p>
              </div>

              <!-- Services Section -->
              <ServiceListCard
                title="General Joinery Services"
                locationInText={locationInText}
                services={[
                  "Door hanging and adjustments",
                  "Skirting and architrave fitting",
                  "Stud wall and partition wall construction",
                  "Flooring installation (engineered wood, laminate, hardwood)",
                  "Pipe and radiator boxing",
                  "Staircase repairs and refurbishments",
                  "Window seats and made-to-measure shelving",
                  "General internal joinery and finishing work",
                ]}
              />

              <div class="space-y-6">
                <ServiceFeatureCard
                  title="Dependable Craftsmanship"
                  description={`When you work with me, you're getting real craftsmanship — I care about the finish and the finer details. We take the same care on a simple door hanging as we do on a full renovation.<br><br>I'm a <a href="/qualifications" class="font-semibold text-brand-600 hover:text-brand-700 transition-colors">fully qualified City & Guilds joiner</a> with decades of practical site experience.`}
                />

                <ServiceFeatureCard
                  title="Skilled and Experienced"
                  description="I'm a fully qualified City & Guilds joiner with decades of experience and a reputation for honest advice, quality work, and treating every home with care."
                />
              </div>

              <!-- Why Choose Me Section -->
              <div
                class="card card-hover border-l-4 border-accent-500 bg-gradient-to-r from-accent-50 to-white"
              >
                <div class="card-body">
                  <h2
                    class="text-2xl font-bold text-neutral-900 mb-4 flex items-center gap-3"
                  >
                    <svg
                      class="w-6 h-6 text-accent-600"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                        clip-rule="evenodd"></path>
                    </svg>
                    Why Choose Me?
                  </h2>
                  <div class="space-y-4">
                    <p class="text-neutral-600">
                      Thinking about some joinery work? I'm always happy to have
                      a chat, offer advice, and provide a no-pressure quote.
                    </p>
                    {
                      cleanLocationName && (
                        <p class="text-neutral-600">
                          {cleanLocationName} includes a wide variety of homes
                          and property types — from modern builds to traditional
                          Yorkshire stone houses. I tailor each job to suit the
                          setting, whether it's matching mouldings, working
                          around older features, or installing fresh timber
                          details that respect the character of the space.
                        </p>
                      )
                    }
                  </div>
                </div>
              </div>

              <ReviewsLinkSection />
            </div>
          </div>

          <!-- Sidebar Column -->
          <div class="order-1 lg:order-2 animate-on-scroll">
            <div class="space-y-8">
              <!-- Gallery Section -->
              <div class="card card-hover overflow-hidden">
                <div class="card-header">
                  <h2 class="text-xl font-bold text-neutral-900">
                    Our General Joinery Work
                  </h2>
                  <p class="text-neutral-600 mt-2">
                    Examples of our craftsmanship and attention to detail
                  </p>
                </div>
                <div class="card-body p-0">
                  <GalleryGrid
                    items={[
                      {
                        src: galleryImg1,
                        label: "English Oak Picture Frame Joinery",
                        alt: `Handcrafted English oak picture frame and internal door trim, finished to a high joinery standard${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                      },
                      {
                        src: galleryImg2,
                        label: "Handmade Solid Ash Vanity Cabinet",
                        alt: `Bespoke ash bathroom vanity cabinet with traditional joinery detailing${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                      },
                      {
                        src: galleryImg3,
                        label:
                          "Composite Decking Installation with Framed Base",
                        alt: `Composite garden decking installation with framed support and timber finish${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                      },
                      {
                        src: galleryImg4,
                        label: "Stud Wall Room Partition",
                        alt: `Stud wall room partition with plasterboard and finished internal joinery${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                      },
                      {
                        src: galleryImg5,
                        label: "Treated fencing and gates for bin store",
                        alt: `Treated timber fencing and gates installed for a bin store enclosure${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                        loading: "lazy",
                      },
                      {
                        src: galleryImg6,
                        label: "Handmade Oak Mirror Frame",
                        alt: `Handmade oak mirror frame crafted with traditional joinery techniques${cleanLocationName ? ` ${cleanLocationName}` : ""}`,
                        loading: "lazy",
                      },
                    ]}
                  />
                </div>
              </div>

              <!-- Contact Form Section -->
              <div class="card card-hover gradient-brand text-white">
                <div class="card-body">
                  <div class="text-center mb-6">
                    <div
                      class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4"
                    >
                      <svg
                        class="w-8 h-8 text-white"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                      >
                        <path
                          d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
                        ></path>
                        <path
                          d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"
                        ></path>
                      </svg>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">
                      Get in Touch About Joinery Work
                    </h2>
                    <p class="text-brand-100">
                      Considering general joinery work? Whether it's repairs,
                      upgrades, or a complete interior refit — I'd be happy to
                      chat and see how I can help.
                    </p>
                  </div>
                  <ModernContactForm
                    title="Get Your Professional Quote"
                    subtitle="Ready to start your project? Get in touch for a professional, no-obligation quote."
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Nearby Areas Section -->
    <section class="section bg-neutral-50">
      <div class="container-wide">
        <div class="animate-on-scroll">
          <NearbyAreas location={Astro.params.location} />
        </div>
      </div>
    </section>
  </main>
</Layout>
